/* =========================
   RouteMap.css (sliding door from dock edge)
   ========================= */
:root{
  --dock-w:80px;          /* 왼쪽 사이드바 실제 너비 */
  --panel-w:300px;        /* 열렸을 때 패널 너비 */

  /* 슬라이드 속도/이징 (느리게 보이도록 여유 있게) */
  --slide-dur:.28s;
  --slide-ease:cubic-bezier(.22,.61,.36,1);
  --fade-dur:.12s;          /* 글자 페이드 속도 */

  --panel-bg:#fafafa;
  --panel-border:#e6e6e6;
  --text:#222;
  --text-muted:#6b7280;
  --accent:#2b8af7;
  --accent-600:#1e72d4;
}

/* 지도는 화면 가득, 패널이 위에 덮임 */
#map{ width:100%; height:100%; display:block; }

/* (지금 쓰는 것 유지) 컨테이너는 width 슬라이드 + opacity/visibility 지연 */
.filter-flyout{
  position:fixed; top:0; left:var(--dock-w); height:100vh;
  width:0; overflow:hidden; pointer-events:none; z-index:50;
  opacity:0; visibility:hidden;
  transition:
    width var(--slide-dur) var(--slide-ease),
    opacity 0s linear var(--slide-dur),
    visibility 0s linear var(--slide-dur);
  will-change: width, opacity;
}
/* 열림: 목표 폭까지 확장 */
.filter-flyout.open{
  width:var(--panel-w); pointer-events:auto;
  opacity:1; visibility:visible;
  transition:
    width var(--slide-dur) var(--slide-ease),
    opacity var(--fade-dur) var(--slide-ease) 0s,
    visibility 0s linear 0s;
}

/* ===== 패널 본체 (미닫이문처럼: 풀높이, 라운드/그림자 없음) ===== */
.sidebar-card{
  width:100%;
  height:100vh;                 /* 도크처럼 전고 */
  margin:0;                     /* 위/아래 틈 제거 */
  padding:12px;
  background:var(--panel-bg);
  color:var(--text);
  box-sizing:border-box;

  /* 슬라이딩 ‘문’처럼 보이게: 직각/플랫 */
  border-radius:0;
  box-shadow:none;
  border-right:1px solid var(--panel-border);

  display:flex;
  flex-direction:column;
  gap:12px;
  overflow-y:auto;
  overflow-x:hidden;
}
.sidebar-card > * { min-width:0; }

/* ▶️ 콘텐츠 페이드: 닫힘 상태에선 자식들을 빠르게 투명화 */
.filter-flyout .sidebar-card > *{
  opacity:0;
  transform: translateX(6px);
  transition:
    opacity var(--fade-dur) var(--slide-ease),
    transform var(--fade-dur) var(--slide-ease);
  will-change: opacity, transform;
}
/* 열릴 때만 살짝 페이드인 */
.filter-flyout.open .sidebar-card > *{
  opacity:1;
  transform:none;
}

/* ── 텍스트/폼 ── */
.sidebar-title{ margin:0 0 6px; font-size:16px; font-weight:700; color:var(--text); }
.form-group{ display:flex; flex-direction:column; gap:6px; margin:0 0 10px; }
.form-label{ font-size:13px; font-weight:600; color:var(--text-muted); }
.help-text,.small-note{ font-size:11px; color:var(--text-muted); }

/* 라벨+컨트롤 */
.label-row{ display:flex; align-items:center; gap:8px; margin:6px 0 10px; }
.label-row__label{ width:86px; font-size:13px; color:var(--text-muted); font-weight:600; }
.label-row__control{ flex:1; min-width:0; }

/* 입력/선택 */
.input,.select{
  width:100%; min-width:0; padding:8px 10px; font-size:13px;
  border:1px solid #e5e7eb; border-radius:10px; background:#fff;
  transition:border-color .2s, box-shadow .2s, background .2s;
}
.input:focus,.select:focus{ outline:none; border-color:var(--accent); box-shadow:0 0 0 3px rgba(43,138,247,.15); }

/* 버튼 */
.btnrow{
  flex: 1;
  border-radius: 10px;
  border:1px solid #e5e7eb; background:#fff; cursor:pointer;
  transition:transform .04s, box-shadow .2s, background .2s, border-color .2s;
}
.btn{
  display:inline-flex; align-items:center; justify-content:center;
  padding:8px 10px; font-size:12px; font-weight:700; border-radius:10px;
  border:1px solid #e5e7eb; background:#fff; cursor:pointer;
  transition:transform .04s, box-shadow .2s, background .2s, border-color .2s;
}
.btn:active{ transform:translateY(1px); }
.btn:disabled{ opacity:.55; cursor:not-allowed; }
.btn-primary{ background:var(--accent); color:#fff; border-color:var(--accent); }
.btn-primary:hover{ background:var(--accent-600); border-color:var(--accent-600); }
.btn-ghost{ background:#fff; }
.btn-ghost:hover{ background:#f3f4f6; }
.btn-toggle{ background:#fff; }
.btn-toggle.on{ background:#e8f5e9; border-color:#cde9d5; }

/* 버튼 묶음 */
.btn-row{ display:grid; grid-template-columns:1fr 1fr; gap:8px; margin:6px 0 10px; }
.btn-row.compact{ display: flex; }

/* 칩 */
.btn-choice{ background:#fff; }
.btn-choice.on{ background:#eef5ff; border-color:#cfe0ff; box-shadow:0 0 0 3px rgba(43,138,247,.12); }

/* 스크롤바 */
.sidebar-card::-webkit-scrollbar{ width:10px; height:10px; }
.sidebar-card::-webkit-scrollbar-thumb{
  background:#e1e4e8; border-radius:8px; border:2px solid transparent; background-clip:padding-box;
}

/* 높이 작을 때 */
@media (max-height: 860px){
  .sidebar-card{ padding:10px; gap:10px; }
  .form-group{ margin:0 0 8px; }
  .label-row{ margin:6px 0 8px; }
  .input,.select,.btn{ padding:7px 9px; font-size:12px; }
  .label-row__label{ width:82px; }
}

/* 같은 폭 강제: 블록화 + 박스사이징 통일 */
.sidebar-card .form-group .input,
.sidebar-card .form-group .select,
.sidebar-card .label-row__control > .input,
.sidebar-card .label-row__control > .select{
  display:block;
  width:100%;
  box-sizing:border-box;
}

/* 스크롤바가 생겨도 내용 가로폭이 흔들리지 않도록(지원 브라우저에서) */
.sidebar-card{
  scrollbar-gutter: stable;
}

/* 상단 헤더(제목 + 닫기) */
.sidebar-header{
  position: sticky;    /* 스크롤해도 항상 위에 고정 */
  top: 0;
  z-index: 2;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-bottom: 6px;
  background: var(--panel-bg);
  border-bottom: 1px solid var(--panel-border);
}

/* 아이콘형 버튼 (X) */
.icon-btn{
  width: 28px;
  height: 28px;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
  background: #fff;
  font-size: 18px;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background .2s, border-color .2s, transform .04s;
}
.icon-btn:hover{ background:#f3f4f6; border-color:#d1d5db; }
.icon-btn:active{ transform: translateY(1px); }
.close-btn{ font-weight: 700; }

/* 경로 안내창 구 버전 */
.map-summary {
  position: absolute;
  top: 12px;
  right: 12px;
  z-index: 1000;
  max-width: min(66vw, 420px);
  pointer-events: none;
}

.map-summary__card {
  background: rgba(255, 255, 255, 0.92);
  border: 1px solid #e6e6e6;
  border-radius: 10px;
  box-shadow: 0 8px 24px rgba(0,0,0,.12);
  padding: 10px 12px;
  font-size: 14px;
  line-height: 1.5;
}

.map-summary__row + .map-summary__row {
  margin-top: 4px;
}

/* ▷ 경로 안내 박스 크기/글씨 키우기 */
/* .map-summary {
  position: absolute;
  right: 18px;
  top: 18px;
  z-index: 10000;
}

.map-summary__card {
  --summary-font: 18px;
  --summary-line: 1.6;
  --summary-width: 460px;

  font-size: var(--summary-font);
  line-height: var(--summary-line);
  min-width: var(--summary-width);
  max-width: 600px;

  padding: 14px 18px;
  border-radius: 12px;
  background: #fff;
  border: 1px solid #e5e5e5;
  box-shadow: 0 6px 24px rgba(0,0,0,.15);
}

.map-summary__row {
  font-weight: 600;
  margin: 6px 0;
}

@media (max-width: 640px) {
  .map-summary__card {
    --summary-font: 16px;
    --summary-width: min(90vw, 380px);
    padding: 12px 14px;
  }
} */

/***************통일 모달*************/
.info-window { font-size:13px; line-height:1.5; max-width:280px; }
.info-header { display:flex; align-items:center; gap:8px; margin-bottom:4px; }
.info-title { font-weight:700; font-size:14px; }
.info-badge { background:#f5f5f5; border:1px solid #ddd; border-radius:6px; padding:2px 6px; font-size:12px; }
.info-row { margin:4px 0; }
.price-box { margin-top:6px; border:1px solid #eee; border-radius:8px; padding:6px; }
.price-row { display:flex; justify-content:space-between; padding:2px 0; }
.price-error { margin-top:6px; color:#c0392b; }
.info-flags { margin-top:8px; display:flex; flex-wrap:wrap; gap:6px; }
.flag { font-size:12px; padding:2px 8px; border-radius:999px; background:#bdc3c7; color:#fff; }
.flag.on { background:#27ae60; }

/* === Zoom Bar === */
/* .zoom-bar{
  position:absolute;
  right:12px; bottom:90px;
  z-index: 1000;
  display:flex; flex-direction:column; align-items:center; gap:8px;
  padding:10px 8px;
  width:44px;
  background:#fff; border:1px solid #ddd; border-radius:12px;
  box-shadow:0 6px 18px rgba(0,0,0,.12);
  user-select:none;
}
.zoom-bar > div[role="button"],
.zoom-bar > div:first-child,
.zoom-bar > div:nth-child(3){
  cursor:pointer; font-size:20px; line-height:1;
}
.zoom-track{
  position:relative; width:6px; height:140px;
  background:#f3f3f3; border-radius:999px; overflow:hidden;
}
.zoom-fill{
  position:absolute; left:0; right:0; bottom:0; height:0;
  background:#2b8af7; border-radius:999px;
  transition:height .15s ease-out;
}
.zoom-label{
  font-size:12px; color:#555; margin-top:2px;
} */
/************반응형***************/
/* ===== 기존(데스크탑) 유지: 좌측 슬라이드 ===== */
/* (네가 올린 RouteMap.css의 .filter-flyout / .sidebar-card 그대로 둬도 됨) */

/* ===== Mobile: 가운데 떠있는 좌측 슬라이드 카드 ===== */
@media (max-width: 640px){
  :root{
    --dock-h: 64px;                            /* 하단 탭 높이 */
    --mobile-gap: 10px;                        /* 상/하 여백 */
    --mobile-panel-w: min(86vw, 320px);        /* 패널 너비 */
    --safe-top: env(safe-area-inset-top, 0px);
    --safe-bottom: env(safe-area-inset-bottom, 0px);
  }

  /* 좌측에서 너비로 슬라이드 + 수직 가운데 정렬 컨테이너 */
  .filter-flyout{
    left: 6px;
    right: auto;
    top: calc(var(--mobile-gap) + var(--safe-top));
    bottom: calc(var(--dock-h) + var(--mobile-gap) + var(--safe-bottom));
    height: auto;
    width: 0;                                  /* 닫힘 */
    display: flex;                             /* 안의 카드 가운데 배치 */
    flex-direction: column;
    justify-content: center;                   /* 수직 중앙 */
    opacity: 0; visibility: hidden; pointer-events: none;
    transition:
      width var(--slide-dur) var(--slide-ease),
      opacity 0s linear var(--slide-dur),
      visibility 0s linear var(--slide-dur);
  }
  .filter-flyout.open{
    width: var(--mobile-panel-w);              /* 열림 */
    opacity: 1; visibility: visible; pointer-events: auto;
  }

  /* 패널 본체: 전체 높이 X, 내부 스크롤 O (가운데 떠 있는 카드) */
  .sidebar-card{
    height: auto;                              /* 데스크탑 100vh 덮어쓰기 */
    max-height: min(72vh,
      calc(100%));                             /* 너무 커지지 않게 제한 */
    margin: 0;                                 /* 부모가 중앙 정렬 */
    border: 1px solid var(--panel-border);
    border-radius: 12px;
    box-shadow: 0 10px 24px rgba(0,0,0,.15);
    overflow-y: auto;                          /* 내용 스크롤 */
    overflow-x: hidden;
    padding-bottom: 10px;
  }

  /* 딤: 탭바 영역은 비워둠(간격 유지) */
  .filter-dim{
    position: fixed;
    left: 0; right: 0;
    top: calc(var(--mobile-gap) + var(--safe-top));
    bottom: calc(var(--dock-h) + var(--mobile-gap) + var(--safe-bottom));
    background: rgba(0,0,0,.35);
    z-index: 40;
  }

  /* 모바일 가독성 */
  .label-row{ flex-direction: column; align-items: stretch; }
  .label-row__label{ width: auto; }
  .btn-row{ grid-template-columns: 1fr; }
  .btn-row.compact{ display: grid; grid-template-columns: 1fr 1fr; }

  /* 지도 오버레이: 탭바 피해서 */
  .map-summary{ left: 6px; right: 8px; bottom: calc(var(--dock-h) + 8px); top: auto; }
  .my-location-btn{ right: 60px; bottom: calc(var(--dock-h) + 16px); }
  .fab{ right: 12px; bottom: calc(var(--dock-h) + 16px); }

  /* 모바일 줌바 숨김 */
  .zoom-bar{ display: none !important; }
}
/*********************딤***************/
/* PC에선 딤 숨김 */
.filter-dim{ display:none; }

/* ===== 모바일 전용 ===== */
@media (max-width: 640px){
  /* 딤 기본: 보이지 않음 */
  .filter-dim{
    position: fixed;
    left: 0; right: 0;
    top: calc(var(--mobile-gap,10px) + env(safe-area-inset-top,0px));
    bottom: calc(var(--dock-h,64px) + var(--mobile-gap,10px) + env(safe-area-inset-bottom,0px));
    background: rgba(0,0,0,.35);
    z-index: 40;
    opacity: 0;
    pointer-events: none;
    display: block;                /* 모바일에서만 존재시키고 투명 처리 */
    transition: opacity .2s ease;
  }

  /* 패널이 열렸을 때만 딤 활성화 (형제 선택자 & 보조 바디 클래스 둘 다 지원) */
  .filter-flyout.open + .filter-dim,
  .filter-flyout.open ~ .filter-dim,
  body.filter-open .filter-dim{
    opacity: 1;
    pointer-events: auto;
  }

  /* 패널 헤더가 스크롤에 따라 함께 올라가도록 sticky 해제 */
  .sidebar-header{
    position: static;
    top: auto;
    z-index: auto;
    background: transparent;       /* 필요 시 유지하려면 이 줄 제거 */
    border-bottom: 0;
  }
}

/* 모바일에서만 위치 조정 */
@media (max-width: 640px){
  :root{
    --dock-h: 64px;                          /* 하단 탭바 높이 */
    --safe-bottom: env(safe-area-inset-bottom, 0px);
    --focus-right: 22px;                     /* 오른쪽 여백 → 내정보 탭 중앙쯤 */
    --focus-gap: 34px;                       /* 탭바에서 더 띄우는 거리 */
  }

  /* 원점포커스(필요시 클래스/아이디 교체) */
  .my-location-btn{
    position: fixed;                         /* 화면 기준 고정 */
    right: var(--focus-right) !important;    /* X: 오른쪽으로 */
    bottom: calc(var(--dock-h) + var(--focus-gap) + var(--safe-bottom)) !important; /* Y: 위로 띄우기 */
    left: auto !important;
    top: auto !important;
    transform: none !important;              /* 가운데 정렬 제거 */
    z-index: 1000;                           /* 다른 컨트롤 위 */
  }
}

/* === 모바일: 딤 끄기 + 패널 그림자 강화 === */
@media (max-width: 640px){
  /* 1) 딤 완전 비활성화 */
  .filter-dim{
    display: none !important;
    opacity: 0 !important;
    pointer-events: none !important;
    background: transparent !important;
  }

  /* 2) 패널(카드)에만 그림자 */
  .sidebar-card{
    border: 1px solid var(--panel-border);
    border-radius: 12px;
    /* 그림자 조금 더 또렷하게 */
    box-shadow: 0 18px 36px rgba(0,0,0,.22), 0 6px 16px rgba(0,0,0,.14);
  }
}
/* 지도 제스처 통과 */
#map { touch-action: pan-x pan-y; }

#map .map-summary,
#map .filter-dim,
#map .route-overlay { pointer-events: none; }

/* 실제로 눌러야 하는 버튼/마커만 다시 살림 */
#map .map-summary .map-summary__card,
.my-location-btn,
.fab,
.marker { pointer-events: auto; }





